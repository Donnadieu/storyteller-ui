name: Storyteller app CI
on: pull_request
jobs:
  build:
    # Doc on calling a reusable workflow: https://docs.github.com/en/actions/using-workflows/reusing-workflows#calling-a-reusable-workflow
    uses: ./.github/workflows/build.yml

  test:
    # name: Test, lint and build
    name: Run test suite
    # strategy:
    #   matrix:
    #     node: ["18"]

    runs-on: ubuntu-20.04

    steps:
      #   - name: Checkout
      #     uses: actions/checkout@v3

      #   - name: Setup workflow variables
      #     id: workflow-vars
      #     shell: bash
      #     run: |
      #       echo "::set-output name=sha::$(echo ${GITHUB_SHA})"

      #   - name: Check Github SHA
      #     run: |
      #       echo "SHA: ${{ steps.workflow-vars.outputs.sha }}"

      #   - name: Install nodejs
      #     uses: actions/setup-node@v3
      #     with:
      #       node-version: ${{ matrix.node }}
      #       cache: "npm"
      #       cache-dependency-path: "package-lock.json"

      #   - name: Install dependencies
      #     run: npm ci

      - name: Run tests
        run: npm test
